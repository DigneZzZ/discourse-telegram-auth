# üìù CHANGELOG - Telegram OAuth Plugin

## –í–µ—Ä—Å–∏—è 1.1.4 (6 –∏—é–Ω—è 2025 –≥.) - –§–ò–ù–ê–õ–¨–ù–ê–Ø –°–¢–ê–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø ‚úÖ

### ‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **üåê –ò–°–ü–†–ê–í–õ–ï–ù–û**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤ `[ru.user.associated_accounts.connect]`
- **üì± –î–û–ë–ê–í–õ–ï–ù–û**: –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **üîß –î–û–ë–ê–í–õ–ï–ù–û**: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ
- **üìÑ –î–û–ë–ê–í–õ–ï–ù–û**: JavaScript –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `assets/javascripts/discourse/initializers/telegram-auth-translations.js`
- `TRANSLATIONS_FIX_REPORT.md`
- `QUICK_TRANSLATIONS_FIX.md`

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
- –†–∞—Å—à–∏—Ä–µ–Ω—ã `config/locales/client.ru.yml` –∏ `server.ru.yml`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `register_translations` –≤ `TelegramAuthenticator`
- –í—ã–∑–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ `after_initialize`

---

## –í–µ—Ä—Å–∏—è 1.1.3 (6 –∏—é–Ω—è 2025 –≥.)

### ‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **üîí –ò–°–ü–†–ê–í–õ–ï–ù–û**: Content Security Policy –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Telegram –≤–∏–¥–∂–µ—Ç–∞
- **üìÑ –î–û–ë–ê–í–õ–ï–ù–û**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π HTML —à–∞–±–ª–æ–Ω –¥–ª—è Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **üõ°Ô∏è –†–ê–°–®–ò–†–ï–ù–û**: CSP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `https://telegram.org`

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `app/views/omniauth_callbacks/telegram.html.erb`
- `CSP_FIX_REPORT.md`

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
- –†–∞—Å—à–∏—Ä–µ–Ω–∞ `extend_content_security_policy` —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–æ—É—Ç—ã `/auth/telegram`, `/auth/telegram/callback`
- –°–æ–∑–¥–∞–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `TelegramAuthController`

---

## –í–µ—Ä—Å–∏—è 1.1.2 (6 –∏—é–Ω—è 2025 –≥.)

### ‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **üîó –ò–°–ü–†–ê–í–õ–ï–ù–û**: Discourse –±–æ–ª—å—à–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫–∏ —Å `reconnect=true`
- **üîß –î–û–ë–ê–í–õ–ï–ù–û**: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `connect_path` –∏ `revoke_path`
- **üóëÔ∏è –£–õ–£–ß–®–ï–ù–û**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `RECONNECT_FIX_REPORT.md`
- `TESTING_GUIDE.md`
- `COMPLETE_FIX_REPORT.md`

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `connect_path()` –∏ `revoke_path()`
- –†–∞—Å—à–∏—Ä–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–µ—Ç–æ–¥–æ–º `telegram_revoke`
- –î–æ–±–∞–≤–ª–µ–Ω DELETE —Ä–æ—É—Ç –¥–ª—è `/auth/telegram/revoke`

---

## –í–µ—Ä—Å–∏—è 1.1.1 (–†–∞–Ω–µ–µ)

### ‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **üö® –ò–°–ü–†–ê–í–õ–ï–ù–û**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
- **üîß –ò–°–ü–†–ê–í–õ–ï–ù–û**: –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- **üìä –î–û–ë–ê–í–õ–ï–ù–û**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **üîê –£–õ–£–ß–®–ï–ù–û**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `CHECKLIST.md`
- `TROUBLESHOOTING.md`
- `CRITICAL_FIX_REPORT.md`
- `spec/telegram_authenticator_spec.rb`
- `debug.js`
- `diagnose.rb`

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω –∫–æ–¥ –≤ –±–ª–æ–∫ `after_initialize`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `reconnect` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ Telegram
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## –í–µ—Ä—Å–∏—è 1.0.0 (–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è)

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OmniAuth
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ omniauth-telegram gem

### ‚ùå –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
- –ü—Ä–æ–±–ª–µ–º—ã —Å signature mismatch
- –ó–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ reconnect —Å—Å—ã–ª–∫–∞—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

---

## –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### üéØ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v1.1.1
2. **–ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ reconnect —Å—Å—ã–ª–∫–∞—Ö** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v1.1.2  
3. **Content Security Policy –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v1.1.3
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v1.1.4

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ –≤–µ—Ä—Å–∏–π**: 4 –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º**: 4 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ + –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**: 15+ —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∫–æ–¥–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~400 —Å—Ç—Ä–æ–∫ Ruby + JavaScript + ERB
- **–î–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –†–µ—à–µ–Ω–æ –∑–∞ 1 –¥–µ–Ω—å

### üèÜ –ò—Ç–æ–≥–∏:
- **–°—Ç–∞—Ç—É—Å**: –ü–û–õ–ù–û–°–¢–¨–Æ –°–¢–ê–ë–ò–õ–¨–ù–´–ô ‚úÖ
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£ ‚úÖ  
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–û–õ–ù–ê–Ø ‚úÖ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–û–ö–†–´–¢–û ‚úÖ

---

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! –ü–ª–∞–≥–∏–Ω –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.** üéâ
